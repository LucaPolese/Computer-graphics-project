<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Computer graphics project</title>
		<link rel="stylesheet" href="index.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<script src="https://cdn.tailwindcss.com"></script>
	</head>
	<body class="relative">
		<div id="loadingModal" class="modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 z-50">
			<div class="modal-content bg-white p-4 rounded shadow-lg text-center">
				<p>Loading, please wait...</p>
				<div class="progress-container w-full bg-gray-200 rounded-full h-2.5 mt-2">
					<div id="progressBar" class="progress-bar bg-blue-500 h-2.5 rounded-full" style="width: 0%;"></div>
				</div>
				<p id="progressText" class="mt-2">0%</p>
			</div>
		</div>
	
		<canvas id="canvas" class="z-0"></canvas>
	
		<!-- Hamburger Menu Button -->
		<div class="absolute top-4 right-4">
			<button id="menuToggle" class="bg-gray-800 text-white py-2 px-3 rounded">
				<i class="fas fa-bars"></i>
			</button>
		</div>
	
		<!-- Lateral Menu -->
		<div id="menu" class="fixed top-0 right-0 w-64 h-full bg-white shadow-lg z-40 transform translate-x-full transition-transform duration-300 overflow-y-auto">
			<div class="p-4 flex justify-between items-center bg-gray-800 text-white">
				<h2 class="text-lg font-bold">Settings</h2>
				<button id="menuClose" class="text-white">
					<i class="fas fa-times"></i>
				</button>
			</div>
			<div class="p-4">
				<h3 class="font-bold">Light Position</h3>
				<div class="flex flex-col space-y-2">
					<div class="flex items-center space-x-2">
						<label for="lightX">X:</label>
						<input id="lightX" type="range" min="-100" max="100" value = "0" class="w-full p-2 border rounded" />
					</div>
					<div class="flex items-center space-x-2">
						<label for="lightY">Y:</label>
						<input id="lightY" type="range" min="-100" max="100" value = "1" class="w-full p-2 border rounded" />
					</div>
					<div class="flex items-center space-x-2">
						<label for="lightZ">Z:</label>
						<input id="lightZ" type="range" min="-100" max="100" value = "0" class="w-full p-2 border rounded" />
					</div>
				</div>
	
				<h3 class="font-bold mt-4">User Position</h3>
				<div class="flex flex-col space-y-2">
					<div class="flex items-center space-x-2">
						<label for="userX">X:</label>
						<input id="userX" type="range" min="-100" max="100" class="w-full p-2 border rounded" />
					</div>
					<div class="flex items-center space-x-2">
						<label for="userY">Y:</label>
						<input id="userY" type="range" min="-100" max="100" class="w-full p-2 border rounded" />
					</div>
					<div class="flex items-center space-x-2">
						<label for="userZ">Z:</label>
						<input id="userZ" type="range" min="-100" max="100" class="w-full p-2 border rounded" />
					</div>
				</div>
	
				<h3 class="font-bold mt-4">Enable/Disable options</h3>
				<div class="flex flex-col space-y-2">
					<label><input id="normalMap" type="checkbox" class="mr-2" /> Normal Map</label>
					<label><input id="displacementMap" type="checkbox" class="mr-2" /> Displacement Map</label>
					<label><input id="specular" type="checkbox" class="mr-2" /> Specular</label>
					<label><input id="transparency" type="checkbox" class="mr-2" /> Transparency</label>
					<label><input id="shadows" type="checkbox" class="mr-2" /> Shadows</label>
				</div>
			</div>
		</div>

		<div class="absolute top-4 left-4 lg:hidden">
			<button id="r" class="bg-red-500 text-white font-bold py-2 px-3 rounded">
				Reload
			</button>
		</div>

		<div class="absolute bottom-0 w-full p-4 lg:hidden">
			<div class="flex justify-between">
				<div class="flex flex-col">
					<!-- WASD Controls -->
					<h3 class="text-black text-center bg-white p-1 mb-2 rounded">Movement</h3>
					<div class="flex flex-col justify-center items-start">
						<div class="grid grid-cols-3 gap-2">
							<div></div>
							<button id="w" class="bg-blue-500 text-white font-bold py-2 px-3 rounded">W</button>
							<div></div>
							<button id="a" class="bg-blue-500 text-white font-bold py-2 px-3 rounded">A</button>
							<button id="s" class="bg-blue-500 text-white font-bold py-2 px-3 rounded">S</button>
							<button id="d" class="bg-blue-500 text-white font-bold py-2 px-3 rounded">D</button>
						</div>
					</div>
				</div>

				<!-- Arrow Controls -->
				<div class="flex flex-col">
					<h3 class="text-black text-center bg-white p-1 mb-2 rounded">Direction</h3>
					<div class="flex flex-col justify-center items-end">
						<div class="grid grid-cols-2 gap-2">
							<button id="ArrowLeft" class="bg-green-500 text-white font-bold py-2 px-3 rounded">
								<i class="fas fa-arrow-left"></i>
							</button>
							<button id="ArrowRight" class="bg-green-500 text-white font-bold py-2 px-3 rounded">
								<i class="fas fa-arrow-right"></i>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script id="skybox-vertex-shader" type="x-shader/x-vertex">
			attribute vec4 a_position;
			varying vec4 v_position;
			void main() {
				v_position = a_position;
				gl_Position = vec4(a_position.xy, 1, 1);
			}
		</script>

		<script id="skybox-fragment-shader" type="x-shader/x-fragment">
			precision mediump float;

			uniform samplerCube u_skybox;
			uniform mat4 u_viewDirectionProjectionInverse;

			varying vec4 v_position;
			void main() {
				vec4 t = u_viewDirectionProjectionInverse * v_position;
				gl_FragColor = textureCube(u_skybox, normalize(t.xyz / t.w));
			}
		</script>

		<script src="js/tools/webgl-utils.js"></script>
		<script src="js/tools/m4.js"></script>

		<script src="js/vertexAndFragment.js"></script>

		<script src="js/generalUtils.js"></script>
		<script src="js/transformationUtils.js"></script>
		<script src="js/geometryUtils.js"></script>
		<script src="js/objUtils.js"></script>
		<script src="js/textureUtils.js"></script>

		<script src="js/index.js"></script>
		
		<script src="js/skybox.js"></script>
	</body>
</html>